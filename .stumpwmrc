(in-package #:stumpwm)

(defparameter *SLIME-DIR* "/home/octocat/.emacs.d/el-get/slime/")
(defparameter *CL-USER-DIR* "/home/octocat/.commonlisp/")
(defparameter *STUMPWM-LIB-DIR* "/home/octocat/.stumpwm.d/")
(defparameter *STUMPWM-GIT-DIR* (concatenate 'string *CL-USER-DIR* "stumpwm-git/"))

(defun load-config-module (name)
  (load (concatenate 'string *STUMPWM-LIB-DIR* name)))

(defun load-config-contrib (name)
  (load (concatenate 'string *STUMPWM-LIB-DIR* "contrib/" name)))

(load (concatenate 'string *SLIME-DIR* "swank-loader.lisp"))
(swank-loader:init) ;; Load swank.;; *prefix-key* ; swank will kick this off
(defvar *swank-p* nil)

(pushnew "/home/octocat/.commonlisp/clx-xkeyboard/" asdf:*central-registry*)

(load-module "battery")
(load-module "cpu")
(load-module "disk")
(load-module "mem")
(load-module "net")
(load-module "wifi")
(load-module "search")
(load-module "screenshot")
(load-module "notifications")
(load-module "stumperwindowlayout")

(load-config-module "credentials.lisp")
(load-config-module "defkeys")
(load-config-module "constants.lisp")
(load-config-module "variables.lisp")
(load-config-module "defuns.lisp")
(load-config-module "commands.lisp")
(load-config-module "keydefs.lisp")
(load-config-module "groups.lisp")

(load-config-contrib "urgent-windows.lisp")
(load-config-contrib "ssh-servers.lisp")
(load-config-contrib "gmail.lisp")
(load-config-contrib "searches.lisp")
(load-config-contrib "global-windows.lisp")

(set-font (make-instance 'xft:font :family "Consolas" :subfamily "Regular" :size 10))

(resize-head 0 0 15 1600 885);

(add-hook *urgent-window-hook* 'echo-urgent-window)

;; turn on/off the mode line for the current head only.
(stumpwm:toggle-mode-line (stumpwm:current-screen)
                         (stumpwm:current-head))

(run-commands "enable-per-window-layout")
